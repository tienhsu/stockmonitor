## Why

在工作或学习场景中，用户需要随时关注股票行情，但不希望被旁人察觉。现有的看盘软件（如同花顺、东方财富等）窗口面积大、视觉特征明显，容易引起注意。市场上缺乏一款专为"隐秘看盘"场景设计的轻量级跨平台桌面工具——能够以极小的悬浮窗口展示关键行情数据，并支持一键快捷键隐藏/显示，让用户在不被打扰的情况下掌握实时股价动态。

## What Changes

这是一个**全新项目**，从零开始构建：

- **新增** 基于 Tauri 2.x 的跨平台桌面应用，支持 Windows 和 macOS
- **新增** 悬浮窗口（Always on Top），以紧凑的迷你面板展示股票信息
- **新增** 全局快捷键系统，支持一键隐藏/显示悬浮窗口（如 `Ctrl+Shift+S` / `Cmd+Shift+S`），以及切换当前显示的股票
- **新增** 股票自选列表管理，支持配置多只股票（A 股），并以列表形式展示
- **新增** 悬浮窗口配置，可自定义同时悬浮显示的股票数量
- **新增** 实时行情数据获取，展示股票价格、涨跌幅等核心指标
- **新增** 数据源抽象层，内置新浪财经、腾讯证券、东方财富三大免费行情 API 适配器，并支持后续扩展其他数据源
- **新增** 本地持久化配置（股票列表、快捷键偏好、窗口位置/大小等）

## Capabilities

### New Capabilities

- `floating-window`: 悬浮窗口核心能力——窗口置顶、无边框/迷你模式、窗口拖拽定位、透明度控制、窗口大小自适应、多显示器支持
- `hotkey-system`: 全局快捷键系统——注册/注销全局热键、隐藏/显示窗口切换、股票快速切换（上/下翻页）、快捷键自定义配置
- `stock-watchlist`: 股票自选列表管理——添加/删除/排序股票、按代码或名称搜索、列表视图展示所有自选股、配置悬浮窗口同时显示的股票数量
- `market-data`: 实时行情数据服务——数据源抽象接口、新浪财经/腾讯证券/东方财富三大 API 适配器、定时轮询刷新（刷新频率用户可配置，支持 1s~60s 区间自定义）、数据源优先级与自动降级切换、数据解析与格式化（价格、涨跌幅、涨跌额）
- `app-settings`: 应用配置与持久化——本地 JSON/TOML 配置文件管理、快捷键偏好设置、窗口外观设置（透明度、主题色、字体大小、**字体颜色自定义配置**——支持涨/跌/平分别设定颜色）、数据刷新频率设置、数据源选择、开机自启动选项

### Modified Capabilities

_无（全新项目，无现有能力需要修改）_

## Impact

### 技术栈

| 层级 | 技术选型 | 说明 |
|------|---------|------|
| 应用框架 | **Tauri 2.x** | 基于 Rust 后端 + 系统 WebView，安装包 < 10MB，内存占用 30-40MB，完美支持 Windows/macOS |
| 前端 UI | **React + TypeScript** | 现代化组件化开发，丰富的生态支持 |
| 样式 | **CSS Modules / Vanilla CSS** | 轻量级样式方案，支持主题定制 |
| 后端逻辑 | **Rust** | 处理系统级操作（全局快捷键注册、窗口管理、网络请求） |
| 数据源 | **新浪财经 / 腾讯证券 / 东方财富 HTTP API** | 免费公开接口，轮询方式获取实时行情，支持多源降级 |
| 配置持久化 | **本地文件（JSON/TOML）** | 通过 Tauri 文件系统 API 读写用户配置 |

### 依赖项

- **Tauri CLI & SDK 2.x** — 应用构建与打包
- **tauri-plugin-global-shortcut** — 全局快捷键注册
- **tauri-plugin-autostart** — 开机自启动
- **tauri-plugin-store** — 本地数据持久化
- **React 19+** — 前端 UI 框架
- **TypeScript 5+** — 类型安全
- **Vite** — 前端构建工具

### 交付产物

- Windows `.msi` / `.exe` 安装包
- macOS `.dmg` / `.app` 安装包
- 用户文档（使用说明、快捷键表、配置指南）

### 风险与约束

- 免费行情 API 存在频率限制和不稳定性风险，需实现重试与降级机制
- 不同操作系统的窗口行为差异（如 macOS 的全屏/Mission Control 交互），需逐平台适配
- 股票数据接口为非官方 API，仅供个人使用，不可用于商业分发
